<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>敵キャラ「スライム」データ参考</title>
  <style>
    * { box-sizing: border-box; }
    body { font-family: sans-serif; max-width: 720px; margin: 0 auto; padding: 16px; background: #1a1a1a; color: #e0e0e0; }
    h1 { font-size: 1.25rem; margin-top: 24px; border-bottom: 1px solid #444; padding-bottom: 8px; }
    h2 { font-size: 1rem; margin-top: 16px; color: #8cf; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; margin: 8px 0; }
    th, td { border: 1px solid #444; padding: 6px 10px; text-align: left; }
    th { background: #333; color: #8cf; }
    tr:nth-child(even) { background: #252525; }
    code { background: #333; padding: 2px 6px; border-radius: 4px; font-size: 13px; }
    pre { background: #222; padding: 12px; overflow-x: auto; font-size: 12px; line-height: 1.4; border-radius: 4px; }
    .preview { display: flex; gap: 24px; align-items: flex-start; flex-wrap: wrap; margin: 16px 0; }
    .preview canvas { image-rendering: pixelated; image-rendering: crisp-edges; border: 1px solid #444; background: #333; }
    .preview figcaption { font-size: 12px; color: #888; margin-top: 4px; }
    .color-swatch { display: inline-block; width: 20px; height: 20px; vertical-align: middle; margin-right: 6px; border: 1px solid #555; border-radius: 2px; }
    ul { margin: 4px 0; padding-left: 20px; }
  </style>
</head>
<body>
  <h1>敵キャラ「スライム」データ（画像作り参考）</h1>
  <p>113-ベアファイトのスライム敵のみを切り出した参考用HTMLです。他キャラの画像作成時の仕様・色・ピクセル位置の参考にしてください。</p>

  <h2>1. デザイン仕様（世界観・アート音楽指示目次より）</h2>
  <ul>
    <li>緑 <code>#33cc33</code> 〜 <code>#22aa22</code></li>
    <li>白目（ハイライト）</li>
    <li>ぷるぷる（2コマで縦に squish するアニメ）</li>
    <li>16×16 ピクセル、2コマ想定</li>
  </ul>

  <h2>2. カラーパレット</h2>
  <table>
    <thead>
      <tr><th>用途</th><th>色コード</th><th>見た目</th></tr>
    </thead>
    <tbody>
      <tr><td>本体（明）</td><td><code>#33cc33</code></td><td><span class="color-swatch" style="background:#33cc33"></span>メインの緑</td></tr>
      <tr><td>本体（暗・影）</td><td><code>#22aa22</code></td><td><span class="color-swatch" style="background:#22aa22"></span>下側の暗い緑</td></tr>
      <tr><td>目（白）</td><td><code>#fff</code></td><td><span class="color-swatch" style="background:#fff"></span>白目</td></tr>
      <tr><td>瞳</td><td><code>#000</code></td><td><span class="color-swatch" style="background:#000"></span>黒</td></tr>
      <tr><td>ハイライト</td><td><code>rgba(255,255,255,0.5)</code></td><td>半透明白（きらり）</td></tr>
    </tbody>
  </table>

  <h2>3. スプライト描画ロジック（Canvas fillRect）</h2>
  <p>16×16 キャンバス。<code>frame % 2 === 0</code> のとき <code>squish = 0</code>、<code>frame % 2 === 1</code> のとき <code>squish = 1</code>（1px 下にずらして縦を詰めた「ぷるっ」表現）。</p>
  <pre>// frame: 0 または 1
const squish = frame % 2 === 0 ? 0 : 1;

c.fillStyle = '#33cc33';
c.fillRect(2, 8 + squish, 12, 8 - squish);  // 胴体
c.fillRect(4, 6 + squish, 8, 2);            // 頭部

c.fillStyle = '#22aa22';
c.fillRect(3, 10 + squish, 10, 4);          // 影（下側）

c.fillStyle = '#fff';
c.fillRect(5, 9 + squish, 2, 2);            // 左目白
c.fillRect(9, 9 + squish, 2, 2);            // 右目白

c.fillStyle = '#000';
c.fillRect(6, 10 + squish, 1, 1);           // 左瞳
c.fillRect(10, 10 + squish, 1, 1);         // 右瞳

c.fillStyle = 'rgba(255,255,255,0.5)';
c.fillRect(4, 7 + squish, 2, 2);            // ハイライト</pre>

  <h2>4. プレビュー（2コマ）</h2>
  <div class="preview">
    <figure>
      <canvas id="c0" width="16" height="16"></canvas>
      <figcaption>フレーム 0（squish=0）</figcaption>
    </figure>
    <figure>
      <canvas id="c1" width="16" height="16"></canvas>
      <figcaption>フレーム 1（squish=1）</figcaption>
    </figure>
    <figure>
      <canvas id="c2" width="64" height="64"></canvas>
      <figcaption>4倍表示（フレーム0）</figcaption>
    </figure>
  </div>

  <h2>5. エンティティ用パラメータ（entities.js より）</h2>
  <table>
    <thead>
      <tr><th>項目</th><th>値</th><th>備考</th></tr>
    </thead>
    <tbody>
      <tr><td>type</td><td><code>'slime'</code></td><td>敵種別</td></tr>
      <tr><td>w</td><td>14</td><td>当たり判定・表示幅（px）</td></tr>
      <tr><td>h</td><td>12</td><td>高さ（スライム・ダルマは12、他は14）</td></tr>
      <tr><td>speed</td><td>30</td><td>移動速度</td></tr>
      <tr><td>scoreValue</td><td>100</td><td>撃破時スコア</td></tr>
      <tr><td>hp</td><td>1</td><td>耐久（スケルトン・デーモンは2）</td></tr>
      <tr><td>アニメコマ数</td><td>2</td><td><code>Assets.enemy.slime</code> の枚数</td></tr>
    </tbody>
  </table>

  <h2>6. 撃破時パーティクル色（takeDamage）</h2>
  <pre>slime: ['#33cc33', '#66ff66', '#fff']</pre>

  <h2>7. フォールバック</h2>
  <p>他敵で画像未読み込み時、<code>Assets.enemy.slime</code> にフォールバックするため、スライムはコード描画で必ず2コマ生成されています。</p>

  <script>
    function drawSlime(ctx, frame) {
      const squish = frame % 2 === 0 ? 0 : 1;
      ctx.fillStyle = '#33cc33';
      ctx.fillRect(2, 8 + squish, 12, 8 - squish);
      ctx.fillRect(4, 6 + squish, 8, 2);
      ctx.fillStyle = '#22aa22';
      ctx.fillRect(3, 10 + squish, 10, 4);
      ctx.fillStyle = '#fff';
      ctx.fillRect(5, 9 + squish, 2, 2);
      ctx.fillRect(9, 9 + squish, 2, 2);
      ctx.fillStyle = '#000';
      ctx.fillRect(6, 10 + squish, 1, 1);
      ctx.fillRect(10, 10 + squish, 1, 1);
      ctx.fillStyle = 'rgba(255,255,255,0.5)';
      ctx.fillRect(4, 7 + squish, 2, 2);
    }

    [0, 1].forEach(i => {
      const c = document.getElementById('c' + i);
      const ctx = c.getContext('2d');
      ctx.clearRect(0, 0, 16, 16);
      drawSlime(ctx, i);
    });

    const c2 = document.getElementById('c2');
    const ctx2 = c2.getContext('2d');
    ctx2.imageSmoothingEnabled = false;
    const tmp = document.createElement('canvas');
    tmp.width = 16;
    tmp.height = 16;
    drawSlime(tmp.getContext('2d'), 0);
    ctx2.drawImage(tmp, 0, 0, 16, 16, 0, 0, 64, 64);
  </script>
</body>
</html>
