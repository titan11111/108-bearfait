# 敵キャラクター 出現頻度一覧

## 表示画像の割り当て（SVG/画像）

**起動時に `Assets.loadImageEnemies()` を実行し、skeleton / skull / daruma を正しく読み込んでいます。**  
未読み込み時はスライムにフォールバックするため、以前スライム表示になっていた場合はこの読み込みが呼ばれていませんでした。

| 敵タイプ | 表示画像 | 登場ステージ |
|----------|----------|--------------|
| slime | コード描画（SpriteGen） | 1, 2, 3 |
| bat | コード描画 | 1〜6 |
| skull | `images/enemy-skull.svg` | 3, 5 |
| daruma | `images/enemy-daruma.svg` | 4 |
| mechDrone | コード描画 | 4 |
| skeleton | `images/enemy-skeleton.svg` | 5, 6 |
| demonImp | コード描画 | 6 |

---

## ステージ別 敵の出現数（4・5・6は+8体、5は3種類）

| ステージ | テーマ | slime | bat | skull | daruma | mechDrone | skeleton | demonImp | **合計** |
|----------|--------|-------|-----|-------|--------|-----------|----------|----------|----------|
| 1 | 草原 | 5 | 5 | — | — | — | — | — | **10** |
| 2 | 草原 | 5 | 5 | — | — | — | — | — | **10** |
| 3 | 氷 | 2 | 2 | 10 | — | — | — | — | **14** |
| 4 | 金属工場 | — | 9 | — | 8 | 5 | — | — | **22** |
| 5 | 城 | — | 8 | 7 | — | — | 8 | — | **23** |
| 6 | 闇 | — | 9 | — | — | — | 5 | 11 | **25** |

---

## 敵タイプ別 総出現数（全ステージ合計）

| 敵 | 総数 | 主な登場ステージ |
|----|------|------------------|
| slime | 11 | 1, 2, 3 |
| bat | 38 | 全ステージ |
| skull | 16 | 3, 5 |
| daruma | 8 | 4 |
| mechDrone | 5 | 4 |
| skeleton | 13 | 5, 6 |
| demonImp | 11 | 6 |

---

## 敵の動き（entities.js より）

全敵に共通する基本動作は **左右のパトロール** です。  
`startX`（出現タイル x × 16）を中心に、`patrolRange`（タイル数 × 16）の範囲で往復します。端に達すると `dir` が反転し、逆向きに移動します。

### 移動パラメータ一覧

| 敵 | 速度(px/秒) | 体力 | 得点 | 特殊動作 |
|----|-------------|------|------|----------|
| slime | 30 | 1 | 100 | なし（左右のみ） |
| bat | 50 | 1 | 150 | **上下に浮遊**（sin波で ±10px） |
| skull | 38 | 1 | 180 | **ジグザグ上下**（約0.35秒で向き反転、振幅±12px） |
| daruma | 42 | 1 | 220 | なし（描画のみ転がり表現） |
| mechDrone | 40 | 1 | 200 | **軽く上下**（sin波で ±4px） |
| skeleton | 35 | **2** | 250 | **主人公に向かって急ダッシュ**（約2.5秒に1回、距離240px以内で突進） |
| demonImp | 45 | **2** | 300 | **ふわふわ浮遊**＋**少し主人公に寄る**（上下左右の揺れ＋距離に応じてホーミング） |

### 動きの詳細

- **左右パトロール**  
  `x += speed * dir * dt`。  
  `x > startX + patrolRange` で `dir = -1`、  
  `x < startX - patrolRange` で `dir = 1`。

- **skeleton（スケルトン）**  
  通常時は左右パトロール。約2.5秒ごとに主人公が一定範囲（240px）内にいると、**急に主人公の方向へダッシュ**（速度220px/秒、約0.4秒間）。ダッシュ中はパトロール範囲を無視して突進。

- **demonImp（デーモンインブ）**  
  **ふわふわ浮遊**: 上下は `sin` の二重波（振幅12+4）、左右も小さく `sin` で揺れる。**主人公に寄る**: 水平方向は距離200px以内で主人公に引き寄せられる（ホーミング速度28）。縦方向は浮遊の中心（yBase）が主人公の高さにゆっくり寄っていく。パトロールの基本速度は 0.35 倍に抑え、ふわふわ＋寄る動きが主になる。

- **bat（コウモリ）**  
  `floatPhase` を時間で進め、`y = yBase + Math.sin(floatPhase) * 10` で上下に揺れる。

- **mechDrone（メカドローン）**  
  同様に `y = yBase + Math.sin(floatPhase) * 4` で小さく上下。

- **skull（スカル）**  
  `zigzagDir`（1 or -1）の向きに `y += zigzagDir * 55 * dt` で上下移動。  
  `zigzagTimer` が 0.35 秒で反転。  
  `y` は `yBase ± 12`（`zigzagAmplitude * 0.5`）にクランプ。

- **daruma（だるま）**  
  移動ロジックは通常の左右パトロール。  
  描画時に `(x - startX) / TILE * π * 0.5 * dir` で回転角を計算し、転がる見た目にしている。

- **skeleton / demonImp**  
  左右パトロールのみ。体力2で、攻撃2回で撃破。

---

## バランス方針

- **ステージ4・5・6**: 徐々に難しくするため、各ステージ **+8体** 追加。
- **ステージ5**: 3種類（skeleton / bat / skull）の敵で構成。
- **ステージ4**: 工場テーマのため daruma + mechDrone + bat のバランスで配置。
